To-Do

------------
*** NPCS ***
------------
MOVE the code from zq_custom.cpp that populates custom weapon
sprites for npcs, into the quest loader.
	THEN, make the weapon sprite a pulldown, offset by +1
	so, the list can hav e NONE as case 0, which is translated
	to a value of -1 for the field.
	Read the field and adjust it by 1 when the dialogue opens. 


npc defence stun, no stunlock

npc WEAPON Sizing

npc hunger for floaters, fliers, wizzrobes, and such.

npc->Parent (for segmented npcs that are not cores)

Extra dropsets: stun dropset, frozen dropset.

MISSING: npcdata->FireSound; npc->FireSound
NEEDED: npc-Defence for LW_SPARKLE.
NEEDED npc->FrozenTile offsets for facing dir, or something so that ZC chooses the
	tile based on the same tile offset as the npc has before being frozen.
	e.g. If they are facing left, on the third tile of a 4-tile animation,
	the frozen tile should be the same offset. 
	NOT simply setting a static tile. 


Enemy flag to block brangs if the npc is already stunned.
...or just a defence type, stun(no stunlock). 
Add magic powder, and an npc var: transform.
The 'transform' var can be an enemy defence (as can split, tribble)!

------------
*** LINK ***
------------
Link->HitWidth, HitHeight, HitZHeight (possibly)

Link->WarpEx()

---------------
*** WEAPONS ***
---------------
Item Editor Weapons?

Weapon -> Defence Redirection / Weapon Editor Stuff
 -> THis requires some changes that I am not sure that we are keeping, so I may leave it out of 2.54. 
 
item editor wpnsprite size: adjust all hardcoded sprite usage so that they use += ( n * tilewidth ) and += ( n * tileheight )

--------------
*** FFCORE ***
--------------
FFCore ButtonRules: A (use item), B (use item), 
	L (inventory left), R (inventory right)
	Disable / enable by script.
Tooltips for all new stuff. Try to improve extant tooltips
and provide tooltip chains.

-----------------
*** DATATYPES ***
-----------------
Set new refs to -1 on bad load, and wrap the macros so that if the
ref is -1, they do not try to access data members.
e.g. ri->shopsref = -1
( if ri->shopsref != -1 ) 
This will prevent the user from loading data from ref 0, without
causing crashes. 

Datatypes:
rgbdata
palette


------------
*** MISC ***
------------
Combo editor types lists
lw->, ew->, npc->Scale : Scale sprites and hitboxes around a specific value.

Subscreen scrolling speed variable. 

-------------
*** RULES ***
-------------
Forward QRs to Items
qr_FIREPROOFLINK (candle, done; book fire, todo)
qr_TEMPCANDLELIGHT (candle, done; book fire, todo)
qr_OUCHBOMBS(bombs, done; sbombs done)
qr_BRANGPICKUP(brangs done; hookshots, todo.)
qr_NOWANDMELEE(wand done; canes, toto)
qr_RAFTLENS
qr_WHIRLWINDMIRROR
qr_BRKNSHLDTILES
qr_NONBUBBLEMEDICINE
qr_NONBUBBLEFAIRIES (or should this be npcs?)
qr_Z3BRANG_HSHOT
qr_NOITEMMELEE
qr_QUICKSWORD	
qr_NOBOMBPALFLASH (may be better as a QR)
qr_NODIVING 
qr_RINGAFFECTDAMAGE
qr_SLASHFLIPFIX
qr_NOWANDMELEE
qr_SWORDMIRROR
qr_LENSSEESENEMIES(may be  better on a per-npc basis, 'Seen by Lens').
qr_LADDERANYWHERE(perhaps better by per-dmap basis?)

Implement Itemdata-based rule behaviour

Forward QRs to enemeies
qr_MEANTRAPS
qr_MEANPLACEDTRAPS
qr_PHANTOMPLACEDTRAPS
qr_NONBUBBLEFAIRIES(or should this be items?)
qr_SHADOWS
qr_TRANSSHADOWS
qr_SHADOWSFLICKER
qr_NOGUYPOOF
qr_WALLFLIERS
qr_LENSSEESENEMIES
qr_ENEMIESFLICKER
qr_PEAHATCLOCKVULN
qr_BROKENSTATUES

Implement Enemy based QR behaviour

Forward QRs to visual effects
qr_FFCSCROLL
qr_SMOOTHVERTICALSCROLLING
qr_NOSCROLLCONTINUE
qr_NOBORDER
qr_SUBSCREENOVERSPRITES
qr_OVALWIPE
qr_TRIANGLEWIPE
qr_SMASWIPE
qr_VERYFASTSCROLLING

Forward rules to ffscript or dmaps:
qr_NOSAVE
qr_NOCONTINUE
qr_NOGUYPOOF
qr_SELECTAWPN
qr_DROWN
qr_INSTABURNFLAGS
qr_ITEMSINPASSAGEWAYS
qr_LADDERANYWHERE(or per-item basis?)
qr_NOFAIRYGUYFIRES
qr_NOSOLIDDAMAGECOMBOS
qr_OFFSCREENWEAPONS(should this be per-weapon?)
qr_NOSCRIPTSDURINGSCROLL
qr_SHORTDGNWALK

Misc
qr_REFLECTROCKS
qr_OFFSETEWPNCOLLISIONFIX
qr_FIREPROOFLINK2 (Invincible Link is not hurt by his own fire)

------------
*** DONE ***
------------

Add CORE attribute to npcs and flag it for multi-segment cores.  [[DONE]]

//Done (Probably)
->GreyscaleOn() and GreyscaleOff() should be Greyscale(bool on)
->WavyIn, WavyOut, ZapIn(), and ZapOut() shoul dbe Way(bool out), and Zap(bool out)

Link->Pushing [[DONE]]
New ZScript Vars, Functions, and Types
ZDefs merge
Quest Loading Code
Saving Code
Script Drawing ( BitmapEx )
Greyscale code
Link No FLicker
Link Hurt Sound
Prevent Active Subscreen
DMAp Palette Code
Combo editor map flags lists,
New fonts
made global special types and arrays legal.
Added comment blocks to ZScript. 
Enemy Editor Sizing
ZQuest Editors: Enemy Editor Defences
Guys
Enemy Defence Code (new defence outcomes, only!)
Enemy Editor Enemy Sizing (Seems as if it should be fine.)

Might Do:

